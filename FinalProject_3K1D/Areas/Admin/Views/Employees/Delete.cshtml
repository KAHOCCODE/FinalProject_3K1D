@model FinalProject_3K1D.Models.NhanVien
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "Delete";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container mt-4">
    <div class="card border-0 shadow-lg rounded-4">
        <div class="card-header bg-danger text-white">
            <h4 class="mb-0">Confirm Deletion</h4>
        </div>
        <div class="card-body bg-light">
            <div class="text-center mb-4">
                @if (Model.HinhAnh != null)
                {
                    <img src="~/image/AnhNhanVien/@Model.HinhAnh" alt="Profile Picture" class="img-fluid border border-info" style="max-width: 200px; height: auto;" />
                }
                else
                {
                    <span class="text-muted">No image available</span>
                }
            </div>
            <h5 class="text-center mb-4">Are you sure you want to delete this employee?</h5>
            <div>
                <h6 class="fw-bold text-secondary">Employee Details</h6>
                <hr />
                <dl class="row">
                    <!-- Full Name -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.HoTen)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.HoTen)
                    </dd>

                    <!-- Date of Birth -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.NgaySinh)
                    </dt>
                    <dd class="col-sm-9">
                        @(((DateTime)Model.NgaySinh).ToString("dd/MM/yyyy"))
                    </dd>

                    <!-- Address -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.DiaChi)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.DiaChi)
                    </dd>

                    <!-- Phone Number -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.Sdt)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.Sdt)
                    </dd>

                    <!-- Email -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.Email)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.Email)
                    </dd>

                    <!-- Username -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.UserNv)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.UserNv)
                    </dd>

                    <!-- Password -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.PassNv)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.PassNv)
                    </dd>

                    <!-- Position -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.IdChucVuNavigation)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.IdChucVuNavigation.TenChucVu)
                    </dd>

                    <!-- Theater -->
                    <dt class="col-sm-3 fw-bold">
                        @Html.DisplayNameFor(model => model.IdRapNavigation)
                    </dt>
                    <dd class="col-sm-9">
                        @Html.DisplayFor(model => model.IdRapNavigation.TenRap)
                    </dd>
                </dl>
            </div>
        </div>
        <div class="card-footer bg-light text-center">
            <form asp-action="Delete" method="post" id="deleteForm">
                <input type="hidden" asp-for="IdNhanVien" />
                <button type="button" class="btn btn-danger me-2" id="deleteButton">Delete</button>
                <a class="btn btn-secondary" asp-action="Index">Back to List</a>
            </form>
        </div>
    </div>
</div>

<!-- Include SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    document.getElementById('deleteButton').addEventListener('click', function (event) {
        event.preventDefault(); // Prevent the default form submission

        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('deleteForm').submit();
            }
        });
    });
</script>
